\section{Network packet format}
The network makes use of network packets for data communication.
The phit size of the config NoC is 16 bits wide.
This implies that a total of 16 bits of data can be transferred over a link in a single cycle.
Each packet contains a header, made up of two separate phits.
The header contains the fields as shown in \cref{tab:header_fields}.

\begin{table}[hbtp]
\centering
\begin{tabular}{@{}ll@{}}
\toprule
\textbf{Header field} & \textbf{\# of bits} \\ \midrule
Packet type           & 2                   \\
Destination cluster X & 4                   \\
Destination cluster Y & 4                   \\
Address               & 20                  \\ \bottomrule
\end{tabular}
\caption{Header fields of a config NoC packet}
\label{tab:header_fields}
\end{table}

The \textit{packet type} field defines whether the packet is a \textit{read request}, \textit{read response} or \textit{write request} packet.
A \textit{read request} packet is initiated by the host.
It is used to retrieve data from a neuron core.
A \textit{read response} packet is produced as an answer to a \textit{read request}.
This packet contains the requested data that is sent back to the host.
Finally, the \textit{write request} is used to write data to a neuron core.

Both the \textit{read response} and \textit{write request} packets has two phits following the header (see \cref{fig:read_response_packet,fig:write_request_packet}).
These two phits contain the payload data that is requested.
Thus in total, packets of these two types are 64 bits in size.
The \textit{read request} packet only consists of the header (see \cref{fig:read_request_packet}).

The destination cluster coordinates are both 4 bits in size due to the need to address 12 different X and 12 different Y coordinates.

The \textit{address field} of 20 bits, allows the system to address $2^{20}$ different addresses.
This address space is used to address the SRAM and the register bank of a neuron core.
% This address space is used to address the SRAM and the register bank of a neuron core, with room to spare \cite{TODO}.

With this packet format, we observe that there is a significant overhead when writing or reading data.
For every 32 bits of data we read or write, an overhead of 32 bits is also included.
In other words, there is an overhead of $100\%$ for every read or write request of 32 bits.
At most, on average, the network transmits one byte of payload data per cycle.

% There is potential to increase this to 64 bits (or 8 bytes) per cycle which is the amount of data an SRAM in a single core can write in a single cycle.

\hspace*{0.5em}
\begin{figure}[htbp]
    \centering
    \begin{subfigure}[b]{\linewidth}
        \centering
        \begin{adjustbox}{width=0.8\linewidth}
            \input{assets/packet_format/read_request_packet}
        \end{adjustbox}
        \caption{Read request}
        \label{fig:read_request_packet}
    \end{subfigure}
    \\ \vspace{1.5em}
    \begin{subfigure}[b]{\linewidth}
        \centering
        \begin{adjustbox}{width=0.8\linewidth}
            \input{assets/packet_format/read_response_packet}
        \end{adjustbox}
        \caption{Read response}
        \label{fig:read_response_packet}
    \end{subfigure}
    \\ \vspace{1.5em}
    \begin{subfigure}[b]{\linewidth}
        \centering
        \begin{adjustbox}{width=0.8\linewidth}
            \input{assets/packet_format/write_request_packet}
        \end{adjustbox}
        \caption{Write request}
        \label{fig:write_request_packet}
    \end{subfigure}
    \caption{
        Config NoC packet structures
    }
    \label{fig:config_noc_packets}
\end{figure}
